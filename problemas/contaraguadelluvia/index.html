<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Contar Agua De LLuvia</title><link rel=stylesheet href=/css/style.css type=text/css media=all></head><body><main class=content><h1>Contar Agua De LLuvia</h1><div class=contenidos><a href=/entradas/>Entradas</a>
<a href=/archivos/>Archivos</a>
<a href=/wallpapers/>Wallpaper</a>
<a href=/problemas>Problemas</a></div><h2 id=contar-agua-de-lluvia>Contar Agua de LLuvia</h2><p>Este problema consisten en dado una lista con numeros los cuales representan la altura de pilares en un contenedor, encontrar el volumen total de agua
que se encuentra &ldquo;atrapada&rdquo; en el array</p><h3 id=solucion>Solucion</h3><p>Mi primera solucion fue la siguiente</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rb data-lang=rb><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>min</span> (a,b)
</span></span><span style=display:flex><span>  a<span style=color:#f92672>&lt;</span>b ? a : b
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#75715e># @param {Integer[]} h</span>
</span></span><span style=display:flex><span><span style=color:#75715e># @return {Integer}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>trap</span>(h)
</span></span><span style=display:flex><span>   left <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span> 
</span></span><span style=display:flex><span>   tot <span style=color:#f92672>=</span> h<span style=color:#f92672>.</span>length() <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>   vol_tot <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>while</span> left <span style=color:#f92672>&lt;</span> tot
</span></span><span style=display:flex><span>        min <span style=color:#f92672>=</span> h<span style=color:#f92672>[</span>left<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>        right <span style=color:#f92672>=</span> left<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> right<span style=color:#f92672>&lt;=</span>tot
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>break</span> <span style=color:#66d9ef>if</span> h<span style=color:#f92672>[</span>right<span style=color:#f92672>]&gt;=</span>min
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> right <span style=color:#f92672>==</span> tot
</span></span><span style=display:flex><span>                left <span style=color:#f92672>+=</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>                right <span style=color:#f92672>=</span> left
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>            right<span style=color:#f92672>+=</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>        v <span style=color:#f92672>=</span> (right<span style=color:#f92672>-</span>left) <span style=color:#f92672>*</span> min(h<span style=color:#f92672>[</span>left<span style=color:#f92672>]</span>,h<span style=color:#f92672>[</span>right<span style=color:#f92672>]</span>)
</span></span><span style=display:flex><span>        less <span style=color:#f92672>=</span> h<span style=color:#f92672>[</span>left<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span><span style=color:#f92672>..</span>right<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>].</span>sum
</span></span><span style=display:flex><span>        v<span style=color:#f92672>-=</span> less
</span></span><span style=display:flex><span>        vol_tot <span style=color:#f92672>+=</span> v
</span></span><span style=display:flex><span>        left <span style=color:#f92672>=</span> right
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>end</span> 
</span></span><span style=display:flex><span>   vol_tot
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>Esta solucion usa dos apuntadores, busca por la izquierda un pilar hasta encontrar un pilar mas grande o igual por la derecha, cuando lo encuentra
este toma el volumen que existe entre los dos y le resta el volumen, pero no contaba en cuenta algunos casos, asi que la modifique para
algunos casos que no tome en cuenta:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rb data-lang=rb><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>min</span> (a,b)
</span></span><span style=display:flex><span>  a<span style=color:#f92672>&lt;</span>b ? a : b
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#75715e># @param {Integer[]} h</span>
</span></span><span style=display:flex><span><span style=color:#75715e># @return {Integer}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>trap</span>(h)
</span></span><span style=display:flex><span>   left <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span> 
</span></span><span style=display:flex><span>   tot <span style=color:#f92672>=</span> h<span style=color:#f92672>.</span>length() <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>   vol_tot <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>while</span> left <span style=color:#f92672>&lt;</span> tot
</span></span><span style=display:flex><span>        min <span style=color:#f92672>=</span> h<span style=color:#f92672>[</span>left<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>        right <span style=color:#f92672>=</span> left<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> right<span style=color:#f92672>&lt;</span>tot
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>break</span> <span style=color:#66d9ef>if</span> h<span style=color:#f92672>[</span>right<span style=color:#f92672>]&gt;=</span>min
</span></span><span style=display:flex><span>            right<span style=color:#f92672>+=</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>break</span> <span style=color:#66d9ef>if</span> h<span style=color:#f92672>[</span>right<span style=color:#f92672>]&gt;=</span>min
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> right <span style=color:#f92672>==</span> tot
</span></span><span style=display:flex><span>         <span style=color:#75715e>#       puts &#34;## Izquierda #{left} Derecha#{right}&#34;    </span>
</span></span><span style=display:flex><span>                left <span style=color:#f92672>+=</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>                min <span style=color:#f92672>=</span> h<span style=color:#f92672>[</span>left<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>                right <span style=color:#f92672>=</span> left<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>               <span style=color:#75715e># next</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>        v <span style=color:#f92672>=</span> (right<span style=color:#f92672>-</span>left<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>) <span style=color:#f92672>*</span> min(h<span style=color:#f92672>[</span>left<span style=color:#f92672>]</span>,h<span style=color:#f92672>[</span>right<span style=color:#f92672>]</span>)
</span></span><span style=display:flex><span>        <span style=color:#75715e>#puts &#34;Volumen: #{v} Izquierda#{left} Derecha#{right}&#34;</span>
</span></span><span style=display:flex><span>        less <span style=color:#f92672>=</span> h<span style=color:#f92672>[</span>left<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span><span style=color:#f92672>..</span>right<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>].</span>sum
</span></span><span style=display:flex><span>        v<span style=color:#f92672>-=</span> less
</span></span><span style=display:flex><span>        vol_tot <span style=color:#f92672>+=</span> v
</span></span><span style=display:flex><span>        left <span style=color:#f92672>=</span> right
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>end</span> 
</span></span><span style=display:flex><span>   vol_tot
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>Pero aun asi esta muy parchado y esta mal, la correcta solucion que supera al 99% de las soluciones es la siguiente:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rb data-lang=rb><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>min</span>(a, b)
</span></span><span style=display:flex><span>  a <span style=color:#f92672>&lt;</span> b ? a : b
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># @param {Integer[]} h</span>
</span></span><span style=display:flex><span><span style=color:#75715e># @return {Integer}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>trap</span>(h)
</span></span><span style=display:flex><span>  left <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  tot <span style=color:#f92672>=</span> h<span style=color:#f92672>.</span>length <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>  vol_tot <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>while</span> left <span style=color:#f92672>&lt;</span> tot
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> h<span style=color:#f92672>[</span>left<span style=color:#f92672>]</span> <span style=color:#f92672>&lt;=</span> h<span style=color:#f92672>[</span>tot<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>      min_height <span style=color:#f92672>=</span> h<span style=color:#f92672>[</span>left<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>      left <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>while</span> left <span style=color:#f92672>&lt;</span> tot <span style=color:#f92672>&amp;&amp;</span> h<span style=color:#f92672>[</span>left<span style=color:#f92672>]</span> <span style=color:#f92672>&lt;</span> min_height
</span></span><span style=display:flex><span>        vol_tot <span style=color:#f92672>+=</span> min_height <span style=color:#f92672>-</span> h<span style=color:#f92672>[</span>left<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>        left <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>      min_height <span style=color:#f92672>=</span> h<span style=color:#f92672>[</span>tot<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>      tot <span style=color:#f92672>-=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>while</span> left <span style=color:#f92672>&lt;</span> tot <span style=color:#f92672>&amp;&amp;</span> h<span style=color:#f92672>[</span>tot<span style=color:#f92672>]</span> <span style=color:#f92672>&lt;</span> min_height
</span></span><span style=display:flex><span>        vol_tot <span style=color:#f92672>+=</span> min_height <span style=color:#f92672>-</span> h<span style=color:#f92672>[</span>tot<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>        tot <span style=color:#f92672>-=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  vol_tot
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div></main></body></html>